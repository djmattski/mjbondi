/*! main 23-05-2015 */
function browserHandler(){var a=0,b=0;this.findBrowserWidth=function(){a=window.innerWidth,"number"!=typeof a&&(a=$(window).width())},this.getBrowserWidth=function(){return a},this.findBrowserHeight=function(){b=window.innerHeight,"number"!=typeof b&&(b=$(window).height())},this.getBrowserHeight=function(){return b}}!function(a){albumHandler=function(){function b(){a("#albumCover").on("click",".paneNav",function(){q=a(this).attr("data-dir"),g(!1)})}function c(){a(".pager li a").each(function(b,c){a(this).on("click",function(){t||(n=b,g(!0),e(b))})})}function d(){if(a(".scrollify").length>0){var b=a(".pager li").length,c=u*b;a("#pagerWrap ul").css("width",c),s=new IScroll("#pagerWrap",{scrollY:!1,scrollX:!0}),s.on("scrollStart",function(){t=!0}),s.on("scrollEnd",function(){t=!1})}}function e(b){if(a(".activePage").removeClass("activePage"),a("#pager_"+b+" a").addClass("activePage"),a("#pagerWrap").hasClass("scrollify")){var c=a("#pagerWrap").width(),d=a("#pagerWrap ul").width(),e=u*b,f=c/2;if(e>f&&d-f>e){"left"==q?e-=c/2:e=e-u-c/2;var g=-1*e;s.scrollTo(g,0,300)}}}function f(b){1200>b?a("#page").css("max-width","950px"):a("#page").css("max-width","1200px")}function g(b){if(b?q=n>m?"right":"left":n="left"==q?m-1:m+1,n>=0&&o>n){var c=a(".active img").css("height");a("#album").css("height",c),a(".active").css("position","absolute");var d=parseInt(a(".active img").width())+10;"left"==q&&(d=-1*d),p=d,r=a("#image_"+n);var g={};a(r).find("span").each(function(b,c){switch(b){case 0:g.src=a(c).text();break;case 1:g.width=a(c).text();break;case 2:g.height=a(c).text();break;case 3:g.alt=a(c).text()}}),f(g.width),r.removeClass("hidden"),r.addClass("moving"),r.css({position:"absolute",left:d,maxWidth:g.width+"px"}),0===a(r).find("img").length?(r.addClass("image"+g.width),r.prepend('<img class="noopac" src="'+g.src+'" width="'+g.width+'" height="'+g.height+'" alt="'+g.alt+'" />'),l=new preLoadImages(r,j),l.loadImgs()):a(r).find("img").removeClass("noopac");var i=-1*p,k=0;a(".active img").addClass("noopac"),a("#album").css("height",g.height),a(".active").animate({left:i},800,function(){}),r.animate({left:k},800,function(){a(".active").removeClass("active").css({position:"static",left:0}).addClass("hidden"),a(".active img").removeClass("noopac"),a(this).removeClass("moving").css({position:"static",left:0}).addClass("active"),a("#album").css("height","auto"),m=n,e(m),g.alt&&h(g.alt)})}}function h(b){a.getJSON(k+"/getMyText/"+b).done(function(b){b["new"]?a("#content_text").animate({opacity:0},300,function(){a("#content_text").html(b.content),a("#content_text").animate({opacity:1},300,function(){}),a("#content_text").removeClass("albumTextYes")}):a("#content_text").hasClass("albumTextYes")||a("#content_text").animate({opacity:0},300,function(){a("#content_text").html(b.content),a("#content_text").animate({opacity:1},300,function(){}),a("#content_text").addClass("albumTextYes")})}).fail(function(a,b,c){var d=b+", "+c;console.log("Request Failed: "+d)})}function i(){r.find("img").removeClass("noopac"),r={}}var j,k="",l=(new browserHandler,{}),m=0,n=0,o=0,p=0,q="",r={},s={},t=!1,u=30;this.setBasePath=function(a){k=a},this.init=function(){d(),o=a(".albumimg").length,b(),c(),j=new Event("_loadEvent"),document.addEventListener("_loadEvent",i,!1);var e=parseInt(a(".loaded img").attr("width"));f(e),a("#image_0").css("max-width",e)}}}(jQuery),function(a){appObject=function(b){var c=new browserHandler,d={},e={};this.init=function(b){a("html").removeClass("no-js"),d=new navHandler,d.init(),a("#albumCover").length>0&&(e=new albumHandler,e.init())},this.checkWidth=function(a){c.findBrowserWidth();var b=c.getBrowserWidth();return b>=a?!0:!1}}}(jQuery),function(a){var b={};a.fn.loadSite=function(a){b=new appObject(a)},a(window).load(function(){b.init()}),a(window).bind("resize",function(){}),a(window).bind("scroll",function(a){})}(jQuery),function(a){navHandler=function(){var a="";this.setBasePath=function(b){a=b},this.init=function(){}}}(jQuery),function(a){preLoadImages=function(b,c){function d(){e=setInterval(function(){if(h>=j.length)return clearInterval(e),void document.dispatchEvent(c);for(i=0;i<g.length;i++)g[i].complete===!0&&(j[i]===!1&&(j[i]=!0,h++,k+=f.delay),a(g[i]).css("visibility","visible"),a(g[i]).parent().removeClass("preloader"),a(g[i]).parent().addClass("loaded"))},f.check_timer)}var e,f={delay:200,check_timer:300,fadein:500},g=b.find("img"),h=0,i=0,j=[],k=f.delay;this.loadImgs=function(){g.each(function(b){a(this).css("visibility","hidden"),a(this).wrap("<div class='preloader' />"),j[b]=!1}),g=a.makeArray(g),d()}}}(jQuery);